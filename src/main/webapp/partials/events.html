<div class="container">

        <div class="row">
                <div class="col-md-12">
                        <div class="input-group">
                                <input class="form-control" type="text" ng-model="query" placeholder="Search...">
                                <span class="input-group-addon">
                                        <i class="icon-search"></i>
                                </span> 
                        </div>
                </div>
        </div>

        <div>

                <ul class="list-unstyled">
                <li ng-repeat="event in events.data" id="event_{{event.key}}">
                <div>
                        <h4 ng-show="createHeader(event.startTime,event)">
                                {{event.startTime | date:'EEEE, MMM d, y'}}  
                        </h4>

                        <div class="well row">

                                <div class="pull-left">
                                        <p>
                                        	<button ng-show="{ORGANIZER:true}[event.registrationInfo]" type="button" class="btn btn-success btn-xs" disabled="disabled"><i class="icon-ok"></i> Organizer</button>
                                        	<button ng-show="{REGISTERED:true}[event.registrationInfo]" type="button" class="btn btn-primary btn-xs" disabled="disabled"><i class="icon-ok"></i> Registered</button>
                                                <button ng-show="{WAIT_LISTED:true}[event.registrationInfo]" type="button" class="btn btn-warning btn-xs" disabled="disabled"><i class="icon-exclamation"></i> Waitlisted</button>
                                                <button ng-hide="{WAIT_LISTED:true,REGISTERED:true}[event.registrationInfo]" type="button" class="btn btn-xs btn-default" disabled="disabled">{{event.maxRegistrations-event.numRegistered | limit10 }}</button>
                                        	<strong>{{event.startTime | date:'shortTime'}}</strong> - <small class="text-muted">{{event.endTime | date:'shortTime'}} </small> 
                                                &nbsp <a href ng-click="toggleEvent();"><strong>{{event.title}} </strong></a>
                                                <small class="text-muted">at {{event.location.title}}, {{event.location.address.city}}</small> 
                                        </p>
                                        

                                </div> 
                                <div class="pull-right">
                                        <ul class="list-inline">
                                                <li class="pagination-centered " ng-repeat="userImage in event.cachedParticipantImages">

                                                        <a href="#/user/{{userImage.participant.key}}"><img ng-src="{{userImage.imageUrl}}?width=25&height=25"></a>
                                                </li>
                                        </ul>
                                </div> 

                                <div class="row event-detail" id="{{event.key}}_detail" collapse="{{event.isCollapse}}">

                                        <table class="table">
                                                <thead>
                                                <tr>
                                                        <th class="col-md-4">
                                                                What? 
                                                        </th> 
                                                        <th class="col-md-3">
                                                                When? Where? 
                                                        </th> 
                                                        <th class="col-md-3">
                                                                Who? 
                                                        </th> 
                                                        <th class="col-md-2">
                                                        </th> 
                                                </tr> 
                                                </thead> 
                                                <tbody>
                                                <tr>
                                                        <td>
                                                                {{modelEvent.description}} 
                                                        </td> 
                                                        <td>
                                                                <p>
                                                                        <strong>{{modelEvent.startTime|date:'shortTime'}} - {{modelEvent.endTime|date:'shortTime'}}</strong> 
                                                                </p>

                                                                <p>
                                                                        {{modelEvent.location.address.street}} 
                                                                </p>
                                                                <p>{{modelEvent.location.address.city}}, {{modelEvent.location.address.state}},  
                                                                </p>
                                                                <p>
                                                                        {{modelEvent.location.address.country}}, {{modelEvent.location.address.zip}} 
                                                                </p>
                                                        </td> 
                                                        <td>
                                                                <p>
                                                                        Organization : <a href="#/org/{{modelEvent.associatedOrganizations[0].key}}">{{modelEvent.associatedOrganizations[0].name}}</a>
                                                                </p>
                                                                <p>
                                                                        Volunteers needed : <strong>{{modelEvent.maxRegistrations-modelEvent.numRegistered | limit10 }}</strong> 
                                                                </p>
                                                                <p>
                                                                        Registered: <strong>{{modelEvent.numRegistered}}</strong> 
                                                                </p>
                                                                <p>
                                                                        Organized by  
                                                                </p>
                                                                <p>
                                                                        <a href="#/user/{{modelEvent.firstOrganizer.key}}"><img ng-src="{{modelEvent.firstOrganizer.profileImage.url}}?type=square"><strong>{{modelEvent.firstOrganizer.firstName}}</strong></a><rating ng-hide="modelEvent.firstOrganizer.eventOrganizerRating.count==0" value="modelEvent.firstOrganizer.eventOrganizerRating.value" max="5" readonly="true"></rating> ({{modelEvent.firstOrganizer.eventOrganizerRating.count}})  
                                                                </p>
                                                        </td> 
                                                        <td>
                                                                <h4>
                                                                        <em><strong>+{{event.karmaPoints}} karma</strong></em>
                                                                </h4>
                                                                <p>

                                                                        <button ng-show="{CAN_REGISTER:true}[modelEvent.registrationInfo]" class="btn btn-success" ng-click="register('REGISTERED')"><i class="icon-ok icon-white"></i> Register</button> 
                                                                        <button ng-show="{CAN_WAIT_LIST:true}[modelEvent.registrationInfo]" class="btn btn-success" ng-click="register('WAIT_LISTED')"><i class="icon-ok icon-white"></i> Wait list</button> 
                                                                        <span ng-show="{REGISTERED:true}[modelEvent.registrationInfo]">
                                                                                <i class="icon-ok"></i> You are registered! 
                                                                        </span>
                                                                        <span ng-show="{WAIT_LISTED:true}[modelEvent.registrationInfo]">
                                                                                <i class="icon-ok"></i> You are waitlisted! 
                                                                        </span>

                                                                </p>
                                                                <p>
                                                                        <a href="#/event/{{modelEvent.key}}" class="btn btn-info"><i class=" icon-info-sign icon-white"></i> More info</a>
                                                                </p>
                                                        </td> 
                                                </tr> 

                                                </tbody> 
                                        </table> 
                                        <div class="fb-like" data-href=""+window.location.origin+"#/event/"+{{modelEvent.key}} data-send="true" data-width="450" data-show-faces="true" data-colorscheme="dark" data-action="recommend"> </div>
                                </div> 

                        </div> 
                </div> 
                </li>
                </ul>
        </div> 
</div> 
